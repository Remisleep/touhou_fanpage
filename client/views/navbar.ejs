<div id="navbar">
    <a href="/">Home</a>
    <a href="/gameplay">Gameplay</a>
    <span id="navwelcome"></span>
        
</div>

<script>
    
    
    $(function(){
        var name = "<%=data.username %>";
        var greetNewcomer = "<input type='text' /> <button>What's you name?</button>";
        
        const sayYourName = function() {
            var vistorName = $('#navwelcome > input').val();
                $.ajax({
                    url: 'welcome',
                    type: 'POST',                    
                    data: {
                        'nombre': vistorName
                    },
                    success: (data) => {
                        //console.log(data);
                        if(data=='SUCCESS') $('#navwelcome').html("Welcome, "+vistorName+"");
                    }
                });
        }

        if(name==""){
            $('#navwelcome').html(greetNewcomer);
            $('#navwelcome > button').on('click', sayYourName);
            $('#navwelocme > input').on('keyup', (key) => {
                if(key.keyCode==13) sayYourName();
            });
        }
        else {
            $('#navwelcome').html("Welcome, "+name+"");
        }
    });
</script>